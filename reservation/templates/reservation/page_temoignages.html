{% extends "base.html" %}
{% load static %}
{% block content %}


<!-- Page Title -->
    <div class="page-title light-background">
      <div class="container d-lg-flex justify-content-between align-items-center">
        <h1 class="mb-2 mb-lg-0">Témoignages</h1>
        <nav class="breadcrumbs">
          <ol>
            <li><a href="{url 'home'}">Home</a></li>
            <li class="current">Testimonials</li>
          </ol>
        </nav>
      </div>
    </div>

  <section id="testimonials" class="testimonials section">
    <div class="container">

      <form method="get" class="mb-4 text-center">
        <input type="text" name="q" placeholder="Rechercher un prestataire..." value="{{ query }}" class="form-control w-50 d-inline-block">
        <button type="submit" class="btn btn-primary ms-2">Rechercher</button>
      </form>
      
      <div class="row gy-4">
          {% for a in avis %}
            <div class="col-lg-6" data-aos="fade-up" data-aos-delay="100">
              <div class="testimonial-item">
                {% if a.prestataire.photo %}
                  <img src="{{ a.prestataire.photo.url }}" class="testimonial-img rounded-circle" alt="Photo de {{ a.prestataire.utilisateur.name }}">
                {% else %}
                  <img src="{% static 'img/default-avatar.png' %}" class="testimonial-img rounded-circle" alt="Default Avatar">
                {% endif %}
                <h3>{{ a.prestataire.utilisateur.name }}</h3>
                <h4>{{ a.prestataire.utilisateur.email }}</h4>
                <div class="stars">
                  <i class="bi bi-star-fill">{{ a.note }}</i>
                </div>
                <p>
                  <i class="bi bi-quote quote-icon-left"></i>
                  <span>{{ a.commentaire|truncatewords:25 }}</span>
                  <small>Par {{ a.client.name }} le {{ a.date|date:"d/m/Y" }}</small>
                  <i class="bi bi-quote quote-icon-right"></i>
                </p>
              </div>
            </div>
          {% empty %}
            <div class="col-lg-12 text-center">
              <p class="text-muted">Aucun témoignage trouvé.</p>
            </div>
          {% endfor %}
        </div>
    </div>

  </section>

<!-- Swiper JS Init -->
{% endblock %}

